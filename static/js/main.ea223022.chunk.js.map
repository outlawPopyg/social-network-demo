{"version":3,"sources":["state/dialog-reducer.js","components/sidebar/sidebar.js","api/api.js","state/users-reducer.js","images/user.png","components/loader/loader.js","hoc/withLoader.js","components/paginator/paginator.js","components/users-page/users-page.js","selectors/selectors.js","components/users-page/users-page-container.js","state/auth-reducer.js","components/header/header.js","components/header/headerContainer.js","components/login/login.js","state/app-reducer.js","state/content-reducer.js","state/redux-store.js","components/content/proifle-info/profileStatus.js","components/content/proifle-info/profileInfo.js","components/content/myPosts/post/post.js","components/content/myPosts/myPosts.js","components/content/myPosts/myPostsContainer.js","components/content/content.js","components/content/contentContainer.js","app.js","index.js","validators/validator.js","components/inputs/textarea.js","hoc/withRedirect.js"],"names":["SEND_MESSAGE","sendMessageActionCreator","value","type","initialState","messagesData","id","uuid","message","dialogsData","name","dialogReducer","state","action","Sidebar","to","instance","axios","create","withCredentials","baseURL","headers","savePhoto","file","formData","FormData","append","put","then","response","data","TOGGLE_FOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","SET_FETCHING","FOLLOWING_IN_PROGRESS","GET_STATUS","users","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","followingId","status","fake","onToggleFollow","userId","setFetching","setFollowing","setProfileStatus","usersReducer","element","find","el","slice","findIndex","followed","filter","Loader","className","withLoader","Wrapper","props","Paginator","React","memo","setCurrentPage","portionSize","useState","portionNumber","setPortionNumber","pagesCount","Math","ceil","leftBorder","rightBorder","pages","i","push","onClick","map","p","toggleFollow","small","photos","src","userImage","alt","disabled","some","uId","url","config","getUsersReselect","createSelector","usersPage","u","getPageSize","getTotalUsersCount","getCurrentPage","getFollowingInProgress","getIsFetching","UserPageContainer","this","getUsers","prevProps","prevState","snapshot","Component","mapDispatchToProps","dispatch","get","items","round","totalCount","finally","method","follow","resultCode","connect","SET_USER_DATA","email","login","isAuth","setUserData","payload","authMeThunk","console","log","authReducer","logout","delete","HeaderContainer","auth","maxLength30","maxLengthCreator","LoginReduxForm","reduxForm","form","handleSubmit","error","onSubmit","Field","placeholder","component","withInput","validate","requiredField","password","rememberMe","post","apiLogin","stopSubmit","_error","withRedirect","initialized","SET_INITIALIZE","appReducer","ADD_POST","SET_USERS_PROFILE","DELETE_POST","SET_PHOTOS_SUCCESS","userInfo","postsData","likesCount","setUserProfile","contentReducer","reducers","combineReducers","dialogsPage","contentPage","app","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","ProfileStatusWithHooks","setUserStatusThunk","editMode","setEditMode","stateStatus","setStateStatus","useEffect","onDoubleClick","autoFocus","onBlur","event","onChange","target","ProfileInfo","setUserPhotoThunk","owner","fullName","large","aboutMe","files","length","Post","maxLength10","MyPosts","onButtonClick","MyPostsFormRedux","postText","addPostActionCreator","Content","ContentContainer","match","params","getUserProfileThunk","getUserStatusThunk","getProfile","res","getStatus","setStatus","a","composedComponent","withRouter","DialogsContainer","lazy","App","initializeApp","exact","path","render","fallback","UsersPageContainer","AppContainer","Promise","all","MainApp","ReactDOM","document","getElementById","maxLength","withInputComponent","input","meta","touched","hasError","withTextArea","mapStateToProps","callback"],"mappings":"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","file":"static/js/main.ea223022.chunk.js","sourcesContent":["import {v4 as uuid} from \"uuid\";\r\nconst SEND_MESSAGE = \"SEND-MESSAGE\";\r\n\r\nconst sendMessageActionCreator = (value) => ({ type: \"SEND-MESSAGE\", value });\r\n\r\nconst initialState = {\r\n    messagesData: [\r\n        { id: uuid(), message: \"Hello, how are you?\" },\r\n        { id: uuid(), message: \"Can you help me ? \" },\r\n        { id: uuid(), message: \"Get my dick inside\" }\r\n    ],\r\n    dialogsData: [\r\n        { id: uuid(), name: \"Ivan\" },\r\n        { id: uuid(), name: \"Andrew\" },\r\n        { id: uuid(), name: \"Calvin\" },\r\n        { id: uuid(), name: \"Dutch\" }\r\n    ]\r\n};\r\n\r\nconst dialogReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case SEND_MESSAGE:\r\n            const message = action.value;\r\n            return {\r\n                ...state,\r\n                messagesData: [...state.messagesData, { id: uuid(), message }]\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default dialogReducer;\r\n\r\nexport {\r\n    sendMessageActionCreator\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport './sidebar.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nconst Sidebar = () => {\r\n    return (\r\n        <nav>\r\n            <div><NavLink to=\"/profile\">Profile</NavLink></div>\r\n            <div><NavLink to=\"/dialogs\">Dialogs</NavLink></div>\r\n            <div><NavLink to=\"/users\">Users</NavLink></div>\r\n            <div><NavLink to=\"/music\">Music</NavLink></div>\r\n            <div><NavLink to=\"/settings\">Settings</NavLink></div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default Sidebar;","import axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n    headers: {\r\n        \"API-KEY\": \"d7a22d46-2b9f-4ab6-9764-bdb9ae134d6d\"\r\n    }\r\n});\r\n\r\nconst authMe = () => {\r\n    return instance.get(`auth/me`, {\r\n        withCredentials: true\r\n    });\r\n}\r\n\r\nconst getProfile = (id) => {\r\n    return instance.get(`profile/${id}`);\r\n}\r\n\r\nconst getUsers = (currentPage, pageSize) => {\r\n    return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n        .then(response => response.data);\r\n}\r\n\r\nconst follow = (id, method) => {\r\n    return instance[method](`/follow/${id}`, {})\r\n        .then(response => response.data);\r\n}\r\n\r\nconst setStatus = (status) => {\r\n    return instance.put(`profile/status`, { status })\r\n        .then(response => response.data);\r\n}\r\n\r\nconst getStatus = (id) => {\r\n    return instance.get(`profile/status/${id}`)\r\n        .then(response => response.data);\r\n}\r\n\r\nconst apiLogin = ({ email, password, rememberMe }) => {\r\n    return instance.post(`auth/login`, { email, password, rememberMe })\r\n        .then(response => response.data);\r\n}\r\n\r\nconst apiLogout = () => {\r\n    return instance.delete(`auth/login`)\r\n        .then(response => response.data);\r\n}\r\n\r\nconst savePhoto = (file) => {\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n    return instance.put(\"profile/photo\", formData, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" }\r\n    })\r\n        .then(response => response.data);\r\n}\r\n\r\nexport { getUsers, follow, getProfile, authMe, setStatus, getStatus, apiLogin, apiLogout, savePhoto };","import {follow, getStatus, getUsers, setStatus } from \"../api/api\";\r\n\r\nconst TOGGLE_FOLLOW = \"TOGGLE-FOLLOW\";\r\nconst SET_USERS = \"SET-USERS\";\r\nconst SET_CURRENT_PAGE = \"SET-CURRENT-PAGE\";\r\nconst SET_TOTAL_USERS_COUNT = \"SET-TOTAL-USERS-COUNT\";\r\nconst SET_FETCHING = \"SET-FETCHING\";\r\nconst FOLLOWING_IN_PROGRESS = \"FOLLOWING-IN-PROGRESS\";\r\nconst GET_STATUS = \"GET-STATUS\";\r\n\r\n\r\nconst initialState = {\r\n    users: [],\r\n    pageSize: 100,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [],\r\n    followingId: null,\r\n    status: \"\",\r\n    fake: 10\r\n};\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n\r\n        case TOGGLE_FOLLOW:\r\n            const { users } = state;\r\n            const element = users.find(el => el.id === action.userId);\r\n\r\n            return {\r\n                ...state,\r\n                users: [\r\n                    ...users.slice(0, users.findIndex(el => el.id === action.userId)),\r\n                    { ...element, followed: !element.followed },\r\n                    ...users.slice(users.findIndex(el => el.id === action.userId) + 1)\r\n                ]\r\n            }\r\n\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            };\r\n\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            }\r\n\r\n        case SET_TOTAL_USERS_COUNT:\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.totalUsersCount\r\n            }\r\n\r\n        case SET_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        case FOLLOWING_IN_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.followingInProgress ?\r\n                    [...state.followingInProgress, action.followingId] :\r\n                    state.followingInProgress.filter(id => id !== action.followingId)\r\n            }\r\n\r\n        case GET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n\r\n\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport const onToggleFollow = (userId) => ({ type: TOGGLE_FOLLOW, userId });\r\nexport const setUsers = (users) => ({ type: SET_USERS, users });\r\nexport const setCurrentPage = (currentPage) => ({ type: SET_CURRENT_PAGE, currentPage });\r\nexport const setTotalUsersCount = (totalUsersCount) => ({ type: SET_TOTAL_USERS_COUNT, totalUsersCount });\r\nexport const setFetching = (isFetching) => ({ type: SET_FETCHING, isFetching });\r\nexport const setFollowing = (followingInProgress, followingId) => ({ type: FOLLOWING_IN_PROGRESS, followingInProgress, followingId });\r\nexport const setProfileStatus = (status) => ({ type: GET_STATUS, status });\r\n\r\nexport const getUserStatusThunk = (id) => (dispatch) => {\r\n    getStatus(id)\r\n        .then(response => dispatch(setProfileStatus(response)));\r\n}\r\n\r\nexport const setUserStatusThunk = (status) => (dispatch) => {\r\n    setStatus(status)\r\n        .then(response => dispatch(setProfileStatus(status)));\r\n}\r\n\r\n\r\n\r\nexport const getUsersThunk = (currentPage, pageSize) => (dispatch) => {\r\n    dispatch(setFetching(true));\r\n\r\n    getUsers(currentPage, pageSize)\r\n        .then(data => {\r\n            dispatch(setUsers(data.items));\r\n            dispatch(setTotalUsersCount(Math.round(data.totalCount)));\r\n        })\r\n        .finally(() => dispatch(setFetching(false)));\r\n}\r\n\r\nexport const toggleFollowUserThunk = (id, method) => (dispatch) => {\r\n    dispatch(setFollowing(true, id));\r\n    follow(id, method)\r\n        .then(data => {\r\n            if (data.resultCode === 0) {\r\n                dispatch(onToggleFollow(id));\r\n            }\r\n        }).finally(() => dispatch(setFollowing(false, id)));\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default usersReducer;","export default __webpack_public_path__ + \"static/media/user.55758720.png\";","import React from 'react';\r\nimport './loader.css';\r\n\r\nconst Loader = () => {\r\n    return (\r\n        <div className=\"loader\">\r\n            <div className=\"loader__bar\"></div>\r\n            <div className=\"loader__bar\"></div>\r\n            <div className=\"loader__bar\"></div>\r\n            <div className=\"loader__bar\"></div>\r\n            <div className=\"loader__bar\"></div>\r\n            <div className=\"loader__ball\"></div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Loader;","import Loader from \"../components/loader/loader\";\r\n\r\nconst withLoader = (Wrapper) => {\r\n   return (props) => {\r\n       if (props.isFetching) return <Loader />;\r\n       return <Wrapper { ... props } />;\r\n   }\r\n}\r\n\r\nexport default withLoader;","import React, {useState} from \"react\";\r\nimport './paginator.css';\r\n\r\nconst Paginator = React.memo(({ totalUsersCount, pageSize, setCurrentPage, currentPage, portionSize = 10 }) => {\r\n\r\n    const [ portionNumber, setPortionNumber ] = useState(1);\r\n\r\n    const pagesCount = Math.ceil(totalUsersCount / pageSize);\r\n    const leftBorder = (portionNumber - 1) * portionSize + 1;\r\n    const rightBorder = portionNumber * portionSize;\r\n\r\n    const pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) pages.push(i);\r\n    return (\r\n        <>\r\n            { portionNumber > 1 && <button onClick={() => setPortionNumber(portionNumber-1)}>left</button>}\r\n            <div className=\"numbers\">\r\n                { pages\r\n                    .slice(leftBorder-1, rightBorder)\r\n                    .map(p => {\r\n                    return <span\r\n                        onClick={() => setCurrentPage(p) }\r\n                        className={ p === currentPage ? \"selectedPage\" : null }\r\n                        key={p}>\r\n                        {p}\r\n                    </span>\r\n                })}\r\n            </div>\r\n            { pagesCount > portionNumber*10-1 &&\r\n                <button onClick={() => setPortionNumber(portionNumber+1)}>Right</button>}\r\n\r\n        </>\r\n    )\r\n});\r\n\r\nexport default Paginator;","import React from 'react';\r\nimport './user-page.css';\r\nimport userImage from '../../images/user.png';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {follow} from \"../../api/api\";\r\nimport withLoader from '../../hoc/withLoader';\r\nimport Paginator from \"../paginator/paginator\";\r\n\r\nconst UserPage = ({ toggleFollow, followingInProgress, pageSize, totalUsersCount, users, currentPage, setCurrentPage }) => {\r\n    return (\r\n        <>\r\n            <h1>UsersPage</h1>\r\n            <Paginator pageSize={pageSize}\r\n                       totalUsersCount={totalUsersCount}\r\n                       setCurrentPage={setCurrentPage}\r\n                       currentPage={currentPage}\r\n                       portionSize={10}\r\n            />\r\n            <ul className=\"list\">\r\n                {\r\n                    users.map(({ id, name, followed, photos: { small } }) => {\r\n                        return (\r\n                            <li key={id} className=\"user\">\r\n                                <div className=\"image\">\r\n                                    <NavLink to={`profile/${id}`}>\r\n                                        <img src={ small !== null ? small : userImage } alt=\"user\"/>\r\n                                    </NavLink>\r\n                                </div>\r\n                                <div>{ name }</div>\r\n                                <button\r\n                                    disabled={followingInProgress.some(uId => uId === id )}\r\n                                    onClick={(url, config) => {\r\n                                    if (!followed) {\r\n                                        toggleFollow(id, \"post\");\r\n                                    } else {\r\n                                        toggleFollow(id, \"delete\");\r\n                                    }\r\n                                }}>{ followed ? \"Unfollow\" : \"Follow\"}</button>\r\n                            </li>\r\n                        );\r\n                    })\r\n                }\r\n            </ul>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default withLoader(UserPage, 'isFetching');\r\n\r\n","import {createSelector} from \"reselect\";\r\n\r\nconst getUsers = state => state.usersPage.users;\r\n\r\nexport const getUsersReselect = createSelector(getUsers, (users) => {\r\n    return users.filter(u => true);\r\n});\r\n\r\nexport const getPageSize = state => state.usersPage.pageSize;\r\nexport const getTotalUsersCount = state => state.usersPage.totalUsersCount;\r\nexport const getCurrentPage = state => state.usersPage.currentPage;\r\nexport const getFollowingInProgress = state => state.usersPage.followingInProgress;\r\nexport const getIsFetching = state => state.usersPage.isFetching;","import { connect } from \"react-redux\";\r\nimport {\r\n    onToggleFollow, setCurrentPage, setFollowing, getUsersThunk, toggleFollowUserThunk\r\n} from \"../../state/users-reducer\";\r\nimport UsersPage from \"./users-page\";\r\nimport {Component} from \"react\";\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress, getIsFetching,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUsers, getUsersReselect\r\n} from \"../../selectors/selectors\";\r\n\r\nclass UserPageContainer extends Component {\r\n    componentDidMount() {\r\n        this.props.getUsers(this.props.currentPage, this.props.pageSize);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevProps.currentPage !== this.props.currentPage) {\r\n            this.props.getUsers(this.props.currentPage, this.props.pageSize);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <UsersPage {...this.props} />;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsersReselect(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n        isFetching: getIsFetching(state)\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    onToggleFollow,\r\n    setCurrentPage,\r\n    setFollowing,\r\n    getUsers: getUsersThunk,\r\n    toggleFollow: toggleFollowUserThunk\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserPageContainer);","import {authMe, apiLogin, apiLogout} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst SET_USER_DATA = \"SET-USER-DATA\";\r\n\r\nconst initialState = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n\r\n\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setUserData = (id, email, login, isAuth) => ({ type: SET_USER_DATA,\r\n    payload: { id, email, login, isAuth} });\r\n\r\nexport const authMeThunk = () => (dispatch) => {\r\n    return authMe()\r\n        .then(response => {\r\n            if (response.data.resultCode === 0) {\r\n                const { id, email, login } = response.data.data;\r\n                dispatch(setUserData(id, email, login, true));\r\n            } else {\r\n                console.log(\"You are not authorized\");\r\n            }\r\n        });\r\n}\r\n\r\nexport const login = (formData) => (dispatch) => {\r\n    apiLogin(formData)\r\n        .then(response => {\r\n            if (response.resultCode === 0) {\r\n                dispatch(authMeThunk());\r\n            } else {\r\n                const action = stopSubmit(\"login\", {_error: \"Something went wrong\"});\r\n                dispatch(action);\r\n            }\r\n        })\r\n}\r\n\r\nexport const logout = () => (dispatch) => {\r\n    apiLogout()\r\n        .then(response => {\r\n            if (response.resultCode === 0) {\r\n                dispatch(setUserData(null, null, null, false));\r\n            } else {\r\n                console.log(\"Something went wrong\");\r\n            }\r\n        })\r\n}\r\n\r\nexport default authReducer;\r\n","import React from 'react';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport \"./header.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { logout } from \"../../state/auth-reducer\";\r\n\r\nconst Header = ({ isAuth, login, logout }) => {\r\n    return (\r\n        <header>\r\n            <div className=\"image\">\r\n                <img\r\n                    src=\"https://upload.wikimedia.org/wikipedia/commons/a/ab/Android_O_Preview_Logo.png\"\r\n                    alt=\"logo\"/>\r\n            </div>\r\n            <div className=\"login\">\r\n                { !isAuth ?\r\n                    <NavLink to=\"/login\">Login</NavLink> :\r\n                    <div>{ login } <button onClick={ logout }>logout</button></div> }\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default connect(null, { logout })(Header);","import React, {Component} from 'react';\r\nimport Header from \"./header\";\r\nimport {connect} from \"react-redux\";\r\nimport { setUserData, authMeThunk } from \"../../state/auth-reducer\";\r\n\r\nclass HeaderContainer extends Component {\r\n\r\n    render() {\r\n        return <Header {...this.props} />\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.auth.userId,\r\n        email: state.auth.email,\r\n        login: state.auth.login,\r\n        isAuth: state.auth.isAuth\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = { setUserData, authMeThunk };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderContainer);","import React from \"react\";\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {withInput} from \"../inputs/textarea\";\r\nimport {maxLengthCreator, requiredField } from \"../../validators/validator\";\r\nimport {login} from \"../../state/auth-reducer\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRedirect } from \"../../hoc/withRedirect\";\r\n\r\nconst maxLength30 = maxLengthCreator(30);\r\n\r\nconst LoginForm = ({ handleSubmit, error }) => {\r\n    return (\r\n        <form onSubmit={ handleSubmit }>\r\n            <div>\r\n                <div>\r\n                    <Field\r\n                        placeholder={\"Login\"}\r\n                        name={\"email\"}\r\n                        component={ withInput }\r\n                        validate={[ requiredField, maxLength30]}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <Field\r\n                        placeholder={\"Password\"}\r\n                        name={\"password\"}\r\n                        component={ withInput }\r\n                        validate={[ requiredField, maxLength30]}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <Field\r\n                        component={ withInput }\r\n                        type={\"checkbox\"}\r\n                        name={\"rememberMe\"}\r\n                    /> remember me\r\n                </div>\r\n                { error && <div className={\"form-summary-error\"}>{ error }</div>}\r\n                <div>\r\n                    <button>Sign in</button>\r\n                </div>\r\n\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({\r\n    // unique name for form\r\n    form: 'login'\r\n})(LoginForm);\r\n\r\nconst Login = ({ login }) => {\r\n\r\n    const onSubmit = (formData) => {\r\n        login(formData);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <h1>Login</h1>\r\n            <LoginReduxForm onSubmit={ onSubmit }/>\r\n        </>\r\n    )\r\n}\r\nconst mapDispatchToProps = { login };\r\n\r\nexport default connect(null, mapDispatchToProps)(withRedirect(\r\n    Login, \"profile\", (props) => props.isAuth));","import { authMeThunk } from \"./auth-reducer\";\r\n\r\n\r\nconst initialState = {\r\n    initialized: false\r\n};\r\n\r\nconst SET_INITIALIZE = \"SET-INITIALIZE\";\r\nexport const setInitialize = () => ({ type: SET_INITIALIZE });\r\n\r\nexport const initializeApp = () => (dispatch) => {\r\n    Promise.all([dispatch(authMeThunk())])\r\n        .then(() => dispatch(setInitialize()));\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_INITIALIZE:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default appReducer;","import {v4 as uuid} from \"uuid\";\r\nimport {getProfile,savePhoto} from \"../api/api\";\r\n\r\nconst ADD_POST = \"ADD-POST\";\r\nconst SET_USERS_PROFILE = \"SET-USER-PROFILE\";\r\nconst DELETE_POST = \"DELETE-POST\";\r\nconst SET_PHOTOS_SUCCESS = \"SET-PHOTOS-SUCCESS\";\r\n\r\nconst initialState = {\r\n    userInfo: '',\r\n    postsData: [\r\n        { id: uuid(), message: \"Hi, how are you?\", likesCount: 12 },\r\n        { id: uuid(), message: \"It's my first post\", likesCount: 9 }\r\n    ]\r\n};\r\n\r\nconst contentReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n\r\n        case DELETE_POST:\r\n            const id = action.id;\r\n            return {\r\n                ...state,\r\n                postsData: [\r\n                    ...state.postsData.slice(0, id),\r\n                    ...state.postsData.slice(id+1)\r\n                ]\r\n            }\r\n\r\n        case ADD_POST:\r\n            const message = action.value;\r\n            return {\r\n                ...state,\r\n                postsData: [...state.postsData, { id: uuid(), message, likesCount: 4 }]\r\n            }\r\n\r\n        case SET_USERS_PROFILE:\r\n            return {\r\n                ...state,\r\n                userInfo: action.userInfo\r\n            }\r\n\r\n        case SET_PHOTOS_SUCCESS:\r\n            return {\r\n                ...state,\r\n                userInfo: { ... state.userInfo, ...action.photos }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setUserProfile = (userInfo) => ({ type: SET_USERS_PROFILE, userInfo });\r\nexport const addPostActionCreator = (value) => ( { type: \"ADD-POST\", value });\r\nexport const deletePost = (id) => ({ type: DELETE_POST, id });\r\nexport const setPhotoSuccess = (photos) => ({ type: SET_PHOTOS_SUCCESS, photos });\r\n\r\nexport const setUserPhotoThunk = (file) => async (dispatch) => {\r\n    const res = await savePhoto(file);\r\n    if (res.resultCode === 0) {\r\n        dispatch(setPhotoSuccess(res.data));\r\n    }\r\n}\r\n\r\nexport const getUserProfileThunk = (id) => (dispatch) => {\r\n    getProfile(id)\r\n        .then(res => dispatch(setUserProfile(res.data)));\r\n}\r\n\r\nexport default contentReducer;\r\n","import {applyMiddleware, combineReducers, createStore, compose } from \"redux\";\r\nimport dialogReducer from \"./dialog-reducer\";\r\nimport contentReducer from \"./content-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { reducer as formReducer } from \"redux-form\";\r\nimport appReducer from \"./app-reducer\";\r\n\r\n\r\nlet reducers = combineReducers({\r\n    dialogsPage: dialogReducer,\r\n    contentPage: contentReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    app: appReducer,\r\n    form: formReducer\r\n});\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\nexport default store;","import React, {useEffect, useState} from \"react\";\r\n\r\nconst ProfileStatusWithHooks = ({ status, setUserStatusThunk }) => {\r\n\r\n    const [ editMode, setEditMode ] = useState(false);\r\n    const [ stateStatus, setStateStatus ] = useState(status);\r\n\r\n    useEffect(() => setStateStatus(status), [ status ]);\r\n\r\n    return  (\r\n        <>\r\n            {\r\n                !editMode &&\r\n                <div>\r\n                    <span onDoubleClick={ () => setEditMode(true) }>{status || \"no\"}</span>\r\n                </div>\r\n            }\r\n\r\n            {\r\n                editMode &&\r\n                <div>\r\n                    <input\r\n                        autoFocus\r\n                        onBlur={ (event) => {\r\n                            setEditMode(false);\r\n                            setUserStatusThunk(stateStatus);\r\n                        }}\r\n                        onChange={ (event) => setStateStatus(event.target.value) }\r\n                        value={ stateStatus }\r\n                        type=\"text\"\r\n                    />\r\n                </div>\r\n            }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ProfileStatusWithHooks;","import React from 'react';\r\nimport Loader from \"../../loader/loader\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport ProfileStatus from \"./profileStatus\";\r\nimport userImage from \"../../../images/user.png\";\r\nimport withLoader from \"../../../hoc/withLoader\";\r\n\r\nconst ProfileInfo = ({ setUserPhotoThunk, userInfo, isAuth, id, status, setUserStatusThunk, owner }) => {\r\n    if (!isAuth) {\r\n        return <Redirect to=\"/login\" />\r\n    }\r\n\r\n    if (!userInfo) {\r\n        return <Loader />;\r\n    }\r\n\r\n    const onInputChanged = ({ target }) => {\r\n        if (target.files.length) {\r\n            console.log(target.files[0])\r\n            setUserPhotoThunk(target.files[0]);\r\n        }\r\n    }\r\n\r\n    const { fullName, photos: { large }, aboutMe } = userInfo;\r\n    return (\r\n        <>\r\n            <div className=\"main-image\">\r\n                <img src={ large ||  userImage } alt=\"main\" />\r\n                { owner && <input type=\"file\" onChange={ onInputChanged }/> }\r\n            </div>\r\n            <h1>{ fullName }</h1>\r\n            <div>{ aboutMe }</div>\r\n            <ProfileStatus status={status} id={id} setUserStatusThunk={setUserStatusThunk}/>\r\n        </>\r\n    );\r\n\r\n\r\n}\r\n\r\nexport default ProfileInfo;","import React from 'react';\r\n\r\nconst Post = ({ message }) => {\r\n    return (\r\n        <p>- { message }</p>\r\n    );\r\n}\r\n\r\nexport default Post;","import React from 'react';\r\nimport Post from \"./post/post\";\r\nimport './myPosts.css';\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {requiredField, maxLengthCreator} from \"../../../validators/validator\";\r\nimport { withInput } from \"../../inputs/textarea\";\r\n\r\nconst maxLength10 = maxLengthCreator(10);\r\n\r\nconst MyPosts = React.memo(({ postsData, onButtonClick }) => {\r\n\r\n    console.log(\"render\");\r\n\r\n    const addNewPost = ({ postText }) => onButtonClick(postText);\r\n    return (\r\n        <div>\r\n            <MyPostsFormRedux onSubmit={ addNewPost }/>\r\n            <div>\r\n                {\r\n                    postsData.map( (data) => {\r\n                        return <Post key={data.id} {...data} />\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nconst MyPostsForm = ({ handleSubmit }) => {\r\n    return (\r\n        <form onSubmit={ handleSubmit }>\r\n            <h1>My posts</h1>\r\n            <Field name={ \"postText\" }\r\n                   type=\"text\"\r\n                   component={ withInput }\r\n                   validate={ [ requiredField, maxLength10 ] }\r\n            />\r\n            <button className={\"my-posts-button\"} >Add new post</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst MyPostsFormRedux = reduxForm({\r\n    form: \"postsForm\"\r\n})(MyPostsForm);\r\n\r\nexport default MyPosts;","import './myPosts.css';\r\nimport { addPostActionCreator } from \"../../../state/content-reducer\";\r\nimport { connect } from \"react-redux\";\r\nimport MyPosts from \"./myPosts\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        postsData: state.contentPage.postsData\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onButtonClick: (value) => dispatch(addPostActionCreator(value))\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MyPosts);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport ProfileInfo from \"./proifle-info/profileInfo\";\r\nimport MyPostsContainer from \"./myPosts/myPostsContainer\";\r\n\r\nconst Content = (props) => {\r\n    return (\r\n        <div className={\"main-content\"}>\r\n            <ProfileInfo { ...props } />\r\n            <MyPostsContainer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Content;","import React, {Component} from 'react';\r\nimport Content from \"./content\";\r\nimport {connect} from \"react-redux\";\r\nimport {setUserProfile, getUserProfileThunk, setUserPhotoThunk} from \"../../state/content-reducer\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {compose} from \"redux\";\r\nimport {getUserStatusThunk, setUserStatusThunk} from \"../../state/users-reducer\";\r\nimport { withRedirect } from \"../../hoc/withRedirect\";\r\n\r\nclass ContentContainer extends Component {\r\n\r\n    componentDidMount() {\r\n        const { params: { id = this.props.id }} = this.props.match;\r\n\r\n        this.props.getUserProfileThunk(id);\r\n        this.props.getUserStatusThunk(id);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const { params: { id = this.props.id }} = this.props.match;\r\n        if (prevProps.match.params.id !== id) {\r\n            this.props.getUserProfileThunk(id);\r\n            this.props.getUserStatusThunk(id);\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return <Content { ...this.props } owner={ !this.props.match.params.id } />;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    userInfo: state.contentPage.userInfo,\r\n    id: state.auth.id,\r\n    isAuth: state.auth.isAuth,\r\n    status: state.usersPage.status\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    setUserProfile, getUserProfileThunk,\r\n    getUserStatusThunk, setUserStatusThunk,\r\n    setUserPhotoThunk\r\n};\r\n\r\nconst composedComponent = compose(\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n    withRouter\r\n)(withRedirect(ContentContainer, \"login\", (props) => !props.isAuth));\r\n\r\nexport default composedComponent;","import React, { Suspense } from 'react';\r\nimport './app.css';\r\nimport Sidebar from \"./components/sidebar/sidebar\";\r\nimport { HashRouter, Route } from \"react-router-dom\";\r\nimport UsersPageContainer from \"./components/users-page/users-page-container\";\r\nimport HeaderContainer from \"./components/header/headerContainer\";\r\nimport Login from \"./components/login/login\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { compose } from \"redux\";\r\nimport Loader from \"./components/loader/loader\";\r\nimport { initializeApp } from \"./state/app-reducer\";\r\nimport store from \"./state/redux-store\";\r\nimport ContentContainer from \"./components/content/contentContainer\";\r\n\r\nconst DialogsContainer = React.lazy(() => import('./components/dialogs/dialogsContainer'));\r\n// const ContentContainer = React.lazy(() => import('./components/content/contentContainer'));\r\n\r\nexport const API_BASE = \"https://social-network.samuraijs.com/api/1.0/users\";\r\n\r\nclass App extends React.Component {\r\n\r\n    componentDidMount() {\r\n        this.props.initializeApp();\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.initialized) return <Loader />;\r\n\r\n        return (\r\n            <div className=\"app-wrapper\">\r\n                <HeaderContainer/>\r\n                <Sidebar/>\r\n                <div className=\"app-wrapper-content\">\r\n\r\n                    <Route exact path=\"/dialogs\" render={() => {\r\n                        return (\r\n                            <Suspense fallback={<div>Loading...</div>}>\r\n                                <DialogsContainer />\r\n                            </Suspense>\r\n                        )\r\n                    }}/>\r\n\r\n                    <Route path=\"/profile/:id?\" component={ContentContainer}/>\r\n\r\n                    <Route exact path=\"/users\" component={UsersPageContainer}/>\r\n\r\n                    <Route exact path=\"/login\" render={() => <Login/>}/>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    initialized: state.app.initialized\r\n})\r\n\r\nconst AppContainer = compose(\r\n    withRouter,\r\n    connect(mapStateToProps, { initializeApp })\r\n)(App);\r\n\r\nconst MainApp = () => {\r\n    return (\r\n        <Provider store={store}>\r\n            <HashRouter>\r\n                <AppContainer />\r\n            </HashRouter>\r\n        </Provider>\r\n    );\r\n}\r\n\r\nexport default MainApp;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport MainApp from \"./app\";\r\n\r\nReactDOM.render(\r\n    <MainApp />,\r\n    document.getElementById('root')\r\n);\r\n\r\n\r\n","export const requiredField = (value) => {\r\n    if (value) return undefined;\r\n    return \"Required field\";\r\n};\r\n\r\n// validator creator\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n    if (value && value.length > maxLength) return `Max length ${maxLength}`;\r\n    return undefined;\r\n};","import React from \"react\";\r\nimport './style.css';\r\n\r\nconst withInputComponent = (Wrapper) => {\r\n    return ({ input, meta, ...props}) => {\r\n        const { error, touched } = meta;\r\n\r\n        const hasError = error && touched;\r\n        return (\r\n            <div className={`form-control ${ hasError ? 'error' : ''}`}>\r\n                <Wrapper { ...input} { ...props } />\r\n                { hasError && <span>{ error }</span> }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst withTextArea = withInputComponent((props) => <textarea { ... props } />);\r\nconst withInput = withInputComponent((props) => <input { ... props } />);\r\n\r\nexport { withTextArea, withInput };","import React from 'react';\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\n// wrapper - ,   \r\n// to - url  \r\n// callback -       \r\n\r\nexport const withRedirect = (Wrapper, to, callback) => {\r\n    function withRedirectComponent(props) {\r\n        const res = callback(props);\r\n        if (res) return <Redirect to={`/${to}`} />;\r\n        return <Wrapper { ...props } />;\r\n    }\r\n\r\n    return connect(mapStateToProps)(withRedirectComponent);\r\n}\r\n\r\n"],"sourceRoot":""}